DROP TABLE IF EXISTS answers CASCADE;
DROP TABLE IF EXISTS sessions CASCADE;
DROP TABLE IF EXISTS questions CASCADE;

-- Create the questions table
CREATE TABLE IF NOT EXISTS questions (
    id UUID PRIMARY KEY,
    topic TEXT NOT NULL,
    difficulty TEXT NOT NULL,
    question_text TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create the sessions table
CREATE TABLE IF NOT EXISTS sessions (
    id SERIAL PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id),
    topic TEXT,
    difficulty TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    final_score FLOAT,
    final_feedback TEXT
);

-- Create the answers table to store user answers and feedback
CREATE TABLE IF NOT EXISTS answers (
    id SERIAL PRIMARY KEY,
    session_id INTEGER REFERENCES sessions(id) ON DELETE CASCADE,
    question_id UUID REFERENCES questions(id),
    user_answer TEXT,
    score INTEGER,
    summary TEXT,
    corrections TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Populate the questions table with your data
INSERT INTO "public"."questions" ("id", "question_text", "topic", "difficulty", "created_at") VALUES
('01bd3b0d-5c51-4a3c-b1c8-832cb90fc61a', 'Explain the difference between a blue-green deployment and a canary deployment. When would you use each?', 'CI/CD', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('0447fd4a-c746-424f-9475-62929a98e072', 'How would you diagnose a server with high CPU usage or high memory consumption?', 'Linux', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('080ea92e-8f75-478d-9514-ba69f8cf7cc3', 'What is the purpose of the `chmod` command? Give an example of how you would use it.', 'Linux', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('0b17e315-8fb2-4a4c-b66a-c774744c9d1a', 'What is Kubernetes and why is it important for DevOps?', 'Kubernetes', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('0bb79984-99b6-4a56-a423-fbab01568ec6', 'Explain the concept of chaos engineering and how it can be used to test your monitoring and alerting systems.', 'Monitoring & Alerting', 'Expert', '2025-09-12 19:59:54.210038+00'),
('1492ca2d-285d-4dd7-8816-2c7c4a4056cb', 'What is the purpose of an Ingress, and how does it manage external access to a cluster?', 'Kubernetes', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('15e32e17-a274-4110-8498-ec6ebd3c1241', 'What is the difference between monitoring and observability?', 'Monitoring & Alerting', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('1646e101-9039-4798-9d2b-f24886f05482', 'Explain the purpose of a ConfigMap and a Secret in Kubernetes.', 'Kubernetes', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('164c5650-97d1-41c4-a04c-23a20cecb72d', 'How would you handle cluster-wide logging and monitoring in a Kubernetes environment?', 'Kubernetes', 'Expert', '2025-09-12 19:59:54.210038+00'),
('18597dc5-42d7-43d0-a0e5-01eb9ac01d3b', 'How would you design a multi-region disaster recovery plan for a critical application on AWS?', 'Cloud (AWS)', 'Expert', '2025-09-12 19:59:54.210038+00'),
('18de052a-e637-47df-a91d-26fcb6b8fbac', 'Discuss the use of GitOps and its advantages over traditional CI/CD approaches.', 'CI/CD', 'Expert', '2025-09-12 19:59:54.210038+00'),
('1fa90711-4c2b-4a89-82b5-16ed35e1c68b', 'Describe a strategy for anomaly detection in a production environment and what tools you would use.', 'Monitoring & Alerting', 'Expert', '2025-09-12 19:59:54.210038+00'),
('20fa7cfd-d5d7-4df7-96b9-dfef255c0710', 'What is "alert fatigue" and how can it be avoided?', 'Monitoring & Alerting', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('22611d96-ca11-46b2-9db2-df3a6e61c591', 'Explain the concept of IAM roles and policies in AWS.', 'Cloud (AWS)', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('23e47b95-2e45-464d-8b41-ec60405772b9', 'How would you use `rsync` for efficient data transfer and synchronization?', 'Linux', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('2c0dd7fa-1b1c-43a3-990d-93ebb71e9e87', 'Explain the difference between a hard link and a soft link in Linux.', 'Linux', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('2da9755a-a557-483d-a2f3-04f885b40c24', 'How would you design a highly available and fault-tolerant CI/CD system?', 'CI/CD', 'Expert', '2025-09-12 19:59:54.210038+00'),
('2f49e184-3668-4428-a0c5-4ccece3acb72', 'Explain what a "build artifact" is in the context of a CI/CD pipeline.', 'CI/CD', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('3354334b-0434-482a-be14-d3086accc22e', 'Explain how you would use AWS Organizations and Service Control Policies (SCPs) to enforce security at an enterprise level.', 'Cloud (AWS)', 'Expert', '2025-09-12 19:59:54.210038+00'),
('3d5cc31e-fc38-4487-8999-e7165b13feb7', 'Explain the concept of a Pod in Kubernetes. What is its smallest unit?', 'Kubernetes', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('445c6a89-4198-494a-a2a6-f5b6672b7ca0', 'Explain the concept of Network Policies and how they are used to secure a multi-tenant cluster.', 'Kubernetes', 'Expert', '2025-09-12 19:59:54.210038+00'),
('459b69a6-cc7d-4faf-bee1-a3e53c8b3df8', 'Describe your strategy for migrating from a monolithic application deployment to a microservices-based CI/CD pipeline.', 'CI/CD', 'Expert', '2025-09-12 19:59:54.210038+00'),
('5239c1dc-7c1f-41ec-904d-4f0ed0b7bf6f', 'How would you find a specific file on a Linux system using the command line?', 'Linux', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('544cbc2b-3480-466b-ae31-05fda081e69f', 'How do you check a process running on a Linux system? Give a few command examples.', 'Linux', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('578cb315-e79e-4982-b8f0-2004db80aa83', 'Explain the key components of the Kubernetes control plane and their function.', 'Kubernetes', 'Expert', '2025-09-12 19:59:54.210038+00'),
('57935df5-2b3e-4a44-b563-c7c3d9b9844c', 'What is continuous testing, and how does it fit into the DevOps lifecycle?', 'CI/CD', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('5907b780-1290-460d-bf59-f05c172cc594', 'How would you handle a situation where a deployment script fails mid-way? What rollback mechanisms would you implement?', 'CI/CD', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('59e95ab6-c9cb-4695-971d-62ef8efce4a3', 'Describe a scenario where you would use distributed tracing and how it helps in troubleshooting.', 'Monitoring & Alerting', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('5dcea177-1430-4661-82db-6a7d2542f92b', 'Explain the difference between Terraform and Ansible. When would you choose one over the other?', 'Infrastructure as Code', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('63f1acd6-1259-464e-b571-b0d5c035526d', 'What is an EC2 instance, and how is it different from an on-premises virtual machine?', 'Cloud (AWS)', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('65efe83c-2388-407b-9f99-3c88504545f6', 'Describe how you would handle versioning and dependency management for a complex IaC project with multiple teams contributing.', 'Infrastructure as Code', 'Expert', '2025-09-12 19:59:54.210038+00'),
('66062963-a37d-4292-b985-9f8842ffdc28', 'What is the difference between proactive and reactive monitoring?', 'Monitoring & Alerting', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('67e321fc-cc5b-4da1-80ce-c329fa1436c2', 'How do version control systems like Git relate to a CI/CD pipeline?', 'CI/CD', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('69525f95-1978-495b-83b6-ebaf0667134f', 'How can you automate the deployment of an application to an EC2 instance using AWS CodeDeploy?', 'Cloud (AWS)', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('6bed115d-7948-4faf-87b6-493b1c184ad7', 'Describe the concept of "state" in Terraform and why it is important.', 'Infrastructure as Code', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('7052238d-9ce2-4472-8d5d-554eee9c7102', 'What is the purpose of collecting metrics, logs, and traces?', 'Monitoring & Alerting', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('727b1da0-f3de-4185-aeb6-fa5f829261ec', 'Explain how a Service Mesh can be used to improve deployments and manage traffic in a CI/CD pipeline.', 'CI/CD', 'Expert', '2025-09-12 19:59:54.210038+00'),
('72ce88d1-2f6a-46c0-8b1a-6582dfcbbccd', 'Explain the difference between an Application Load Balancer (ALB) and a Network Load Balancer (NLB).', 'Cloud (AWS)', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('731b8fd3-c0f5-4d7a-8cd2-b79738de6820', 'How do you handle security groups and NACLs in an AWS VPC?', 'Cloud (AWS)', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('79c14f10-3f5f-4f54-9264-e7c6fa298f1f', 'What is the difference between a process and a thread, and how would you monitor them in Linux?', 'Linux', 'Expert', '2025-09-12 19:59:54.210038+00'),
('7b515659-1536-43eb-a989-2972ede68cd9', 'Explain the difference between `git fetch` and `git pull`.', 'Linux', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('7cd970be-bad0-4c8c-ac0c-e559a36d4b04', 'Explain the concept of "policy as code" and its role in an IaC pipeline.', 'Infrastructure as Code', 'Expert', '2025-09-12 19:59:54.210038+00'),
('7e4a7b7c-0ffe-44a1-bdae-b39584b5380b', 'What is the difference between provisioning and configuration management?', 'Infrastructure as Code', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('8405b366-6af8-4efb-87ef-23c6327dcb41', 'Name the three pillars of observability.', 'Monitoring & Alerting', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('841690b0-39f9-4c0d-b2ee-04855e4f83e5', 'How does the Horizontal Pod Autoscaler (HPA) work? Describe a scenario where you would use it.', 'Kubernetes', 'Expert', '2025-09-12 19:59:54.210038+00'),
('8589ba7d-7f8f-4119-83e7-780fc9c75f1d', 'Name at least three popular IaC tools and describe their primary use case.', 'Infrastructure as Code', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('894862c0-b40a-4d23-8ebe-e2720e520395', 'What is SSH and how is it used in a DevOps environment?', 'Linux', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('8bdc5add-1b66-450e-80a2-3a092c73ae51', 'Discuss how you would implement a service mesh to improve observability in a Kubernetes cluster.', 'Monitoring & Alerting', 'Expert', '2025-09-12 19:59:54.210038+00'),
('8ebfbdd6-1999-4063-9977-288a1edf4906', 'What is a drift in an IaC environment and how would you manage it?', 'Infrastructure as Code', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('943f5645-01c9-4958-a7cb-3409afdd17a8', 'Discuss the pros and cons of using AWS Fargate versus EKS for container orchestration.', 'Cloud (AWS)', 'Expert', '2025-09-12 19:59:54.210038+00'),
('9691d012-0fc0-4084-926f-6ef395b2c412', 'What is a Service in Kubernetes, and what are the different types of Services?', 'Kubernetes', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('9801543f-4d1f-46b6-8eb6-c3c1dff96dd4', 'Describe the role of a custom operator in Kubernetes. Provide a use case where you would develop one.', 'Kubernetes', 'Expert', '2025-09-12 19:59:54.210038+00'),
('993bf0bb-df0b-4b93-a629-c654fc15d06f', 'Discuss the role of Linux namespaces and cgroups in containerization.', 'Linux', 'Expert', '2025-09-12 19:59:54.210038+00'),
('9e0d9bc5-a88b-4862-a96f-eb7f5658ebe4', 'You have multiple teams with their own services. How do you implement a unified monitoring and alerting strategy while providing team autonomy?', 'Monitoring & Alerting', 'Expert', '2025-09-12 19:59:54.210038+00'),
('a1c36ee6-5224-402f-bf1c-0cf33ac74137', 'Explain the difference between a declarative and an imperative approach to IaC.', 'Infrastructure as Code', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('a1f93d47-da05-4edb-a49b-5544d4349382', 'How do you handle monitoring and alerting for a microservices architecture?', 'Monitoring & Alerting', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('a30d3089-2185-45aa-acd0-cdb08565d384', 'What is the purpose of a build stage in a CI/CD pipeline?', 'CI/CD', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('a46c2f5a-62af-42a1-9e27-20e9622fdac4', 'Name some popular CI/CD tools and describe the purpose of each.', 'CI/CD', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('a68bb553-ee6f-4219-8ad1-54866eb939b6', 'How would you design a fault-tolerant and highly scalable logging pipeline for a globally distributed application?', 'Monitoring & Alerting', 'Expert', '2025-09-12 19:59:54.210038+00'),
('aaf2c9d4-3bd5-40f6-995f-ec84ae94be80', 'What is the purpose of `cron` and how do you set up a scheduled task?', 'Linux', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('aea82d72-f321-4140-8821-11b03327aa1d', 'You are unable to SSH into a remote server after a reboot. What are the steps you would take to troubleshoot the issue?', 'Linux', 'Expert', '2025-09-12 19:59:54.210038+00'),
('b16d077d-6ce6-4eb2-acbb-a53fa1208d88', 'What is a Deployment in Kubernetes and how does it relate to Pods?', 'Kubernetes', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('bb602f2a-0566-4934-bdb3-5832871ca29f', 'You are working on a multi-repository project. How would you handle a shared library or dependency across multiple CI/CD pipelines?', 'CI/CD', 'Expert', '2025-09-12 19:59:54.210038+00'),
('be2a5025-a434-4bae-bc5a-e0c4efa06386', 'Explain the difference between a Deployment and a StatefulSet. When would you use a StatefulSet?', 'Kubernetes', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('bf1cbae6-7451-47a1-bf24-c672d3b3048d', 'How would you design a Linux server hardening checklist for a production environment?', 'Linux', 'Expert', '2025-09-12 19:59:54.210038+00'),
('c01b503a-d4b9-4117-bc1f-7b05b1cda23d', 'What is the role of a Node in a Kubernetes cluster?', 'Kubernetes', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('c07ccd08-a980-4873-bd3f-8b32ebbd4eaf', 'How do you ensure security in your CI/CD pipeline?', 'CI/CD', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('c2fe7715-e761-438b-bd91-d2c9b9bdc35e', 'Walk me through a complex scenario where you had to troubleshoot a failed Terraform apply in a production environment.', 'Infrastructure as Code', 'Expert', '2025-09-12 19:59:54.210038+00'),
('c301c9aa-a790-4d0a-83b8-34c3ffc1067e', 'Describe a strategy for cost optimization on AWS for a large-scale, high-traffic application.', 'Cloud (AWS)', 'Expert', '2025-09-12 19:59:54.210038+00'),
('c5bd5a0f-a622-4e3f-9c24-4666bc09c099', 'What is an SLA, SLO, and SLI in a DevOps context?', 'Monitoring & Alerting', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('c99dcf19-b072-4012-b3de-aec35dac6e20', 'Describe the purpose of an S3 bucket and give a few examples of its use cases.', 'Cloud (AWS)', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('c9bd02c7-871a-4a37-87ab-89c97d16ee7d', 'Explain how a Kernel crash dump is generated and how you would analyze it.', 'Linux', 'Expert', '2025-09-12 19:59:54.210038+00'),
('cadae58a-4ca8-4759-8ed2-f1aff81e54de', 'How would you set up a comprehensive alerting system for a critical application?', 'Monitoring & Alerting', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('cc617552-d409-4c8e-b95e-90a5658af4ed', 'What is the main difference between continuous integration, continuous delivery, and continuous deployment?', 'CI/CD', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('d1721919-4ef4-4b13-b7df-57d895f53ccd', 'What is AWS Lambda? Explain a scenario where you would use a serverless function.', 'Cloud (AWS)', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('d219137d-fdba-4dc8-8d3f-f8b9b1326c1d', 'Describe the difference between a `tee`, `awk`, and `sed` command.', 'Linux', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('d3cd48a7-b6bf-4f49-b7af-ac272df72966', 'Explain the role of Prometheus and Grafana in a monitoring stack.', 'Monitoring & Alerting', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('d5ba37f3-dfb9-4c3b-abfa-8828d56f5275', 'What are the main benefits of using AWS for DevOps?', 'Cloud (AWS)', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('d8c3489e-6f02-4300-bf8a-3d1261eec499', 'What is Infrastructure as Code (IaC) and what are its key benefits?', 'Infrastructure as Code', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('d98d7d45-06d2-4659-8a88-d220bee4acd2', 'What is the purpose of AWS CloudFormation?', 'Cloud (AWS)', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('da24e2b2-0839-484d-b894-886bee9d449b', 'How would you use modules to create reusable and scalable IaC configurations?', 'Infrastructure as Code', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('deaa48c7-a650-48b2-886b-12d455790fbc', 'Discuss the use of immutable infrastructure and how it differs from mutable infrastructure.', 'Infrastructure as Code', 'Expert', '2025-09-12 19:59:54.210038+00'),
('e036d5ee-124f-43b7-b304-eca09e174545', 'How do you handle secrets and sensitive data in your IaC code?', 'Infrastructure as Code', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('e1110025-2572-4adc-a3e1-070408d75e08', 'Describe a complex problem you solved using a combination of multiple AWS services (e.g., Lambda, S3, SNS, SQS).', 'Cloud (AWS)', 'Expert', '2025-09-12 19:59:54.210038+00'),
('ec2e02c7-f7c9-4aad-8461-721a79291f36', 'Describe how you would set up a highly available and fault-tolerant web application using AWS services.', 'Cloud (AWS)', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('ed7c5967-ad4d-421f-8ba1-e88eaf647fb9', 'How do rolling updates work in a Kubernetes Deployment?', 'Kubernetes', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('f7ae3379-5963-45e3-97f5-7922747f7197', 'How does IaC contribute to reproducibility and consistency in a development environment?', 'Infrastructure as Code', 'Beginner', '2025-09-12 19:59:54.210038+00'),
('fa19615a-5433-41cb-a4bf-b1b2ab7ffa73', 'Describe the main components of a typical Jenkins pipeline and how they work together.', 'CI/CD', 'Intermediate', '2025-09-12 19:59:54.210038+00'),
('fba83aa0-7d14-4eb1-b724-d14388420c32', 'How would you design and implement a multi-cloud IaC solution for a large-scale enterprise?', 'Infrastructure as Code', 'Expert', '2025-09-12 19:59:54.210038+00'),
('fc4154ad-d0ab-43c8-a034-22a80e30cf8b', 'What is a container and how does it differ from a virtual machine?', 'Kubernetes', 'Beginner', '2025-09-12 19:59:54.210038+00');